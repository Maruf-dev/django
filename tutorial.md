# Django Full Course Notes

## 1. Introduction to Django

- **Django** is a high-level Python web framework that encourages rapid development and clean, pragmatic design.
- Follows the **MVT (Model-View-Template)** architectural pattern.

## 2. Installation & Environment Setup

### Install Django

```bash
py -m pip install Django==5.2.5
```

- To check the Django version:

```bash
django-admin --version
```

### Virtual Environment

- Use a virtual environment to isolate dependencies and avoid conflicts between projects.
- There are several types (e.g., `pipenv`, `venv`, `anaconda`). Here, we use **pipenv** for its simplicity.

```bash
pip install pipenv
pipenv shell
```

- To install Django inside your virtual environment:

```bash
pipenv install django
```

- To install a specific version:

```bash
pipenv install django~=3.1.0
```

- To see all installed packages and their versions:

```bash
pip freeze
```
- you can see all installed packages in your virtual environment using:
```bash
pip list
```


- **Note:** The `Pipfile` is auto-generated by pipenv and lists all dependencies. It's similar to `package.json` in Node.js. Usually, you don't need to edit it manually.

## 3. Starting a Project

- To create a new Django project:

```bash
django-admin startproject myproject
```

-  To see full list of commands:

```bash
django-admin help
```

- For a modern and flexible structure (recommended):

```bash
django-admin startproject config .
```

- **Project structure** (inside `/config`):
  - `asgi.py`
  - `settings.py`
  - `urls.py`
  - `wsgi.py`

- To create a new app within your project:

```bash
python manage.py startapp my_app
```

- **Important:** After creating an app, add its name to the `INSTALLED_APPS` list in `settings.py`.

- To run the development server:

```bash
python manage.py runserver
```

- **Tip:** Before starting a project, navigate to your desired folder using the `cd` command.

- **Main files to edit frequently:** `settings.py` and `urls.py`.

## 4. Templates Setup

- Create a `templates` folder in your main project directory (e.g., `lessondjango/templates`).

- In `settings.py`, configure the templates directory:

```python
TEMPLATES = [
    {
        # ...
        'DIRS': [str(BASE_DIR.joinpath('templates'))],
        # ...
    },
]
```

- This setup is usually done once per project.

## 5. Using Templates in Views

- In your app's `views.py`:

```python
from django.views.generic import TemplateView

class HomePageView(TemplateView):
    template_name = 'home.html'
```

- render the template in your browser with function-based view
```python
from django.shortcuts import render

def home_view(request):
    return render(request, 'home.html')

- In your project's `urls.py`:

```python
from django.contrib import admin
from django.urls import path
from .views import HomePageView  # Make sure to import your view

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', HomePageView.as_view(), name='home'),
]
```

## 6. Adding base template
- Create a `base.html` file in the `templates` folder:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Django Site{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <header>
        <h1>Welcome to My Django Site</h1>
    </header>
    <main>
        {% block content %}
        <!-- Content will be injected here -->
        {% endblock %}
    </main>
    <footer>
        <p>&copy; 2025 My Django Site</p>
    </footer>
</body>
</html>
```
- In your `home.html`, extend the base template:

```html
{% extends 'base.html' %}

{% block title %}Home Page{% endblock %}

{% block content %}
    <h2>This is the Home Page</h2>
    <p>Welcome to the Django tutorial!</p>
{% endblock %}
```
- getting data from views.py

```python
from django.shortcuts import render
def home_view(request):
    context = {
        'page_title': 'Home Page',
        'welcome_message': 'Welcome to the Django tutorial!'
    }
    return render(request, 'home.html', context) // or return render(request, 'home.html', {'page_title': 'Home Page', 'welcome_message': 'Welcome to the Django tutorial!'})
```
// now should edit home.html
```html
{% extends 'base.html' %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
    <h2>This is the {{ page_title }}</h2>
    <p>{{ welcome_message }}</p>
{% endblock %}
```
- or we can add logic .html file
{% if page_title %}
    <h2>This is the {{ page_title }}</h2>
    <p>{{ welcome_message }}</p>
{% else %}
    <h2>Welcome to the Django tutorial!</h2>
{% endif %}

- installing django-debug-toolbar
```bash
pipenv install django-debug-toolbar
```
// add it to installed apps in settings.py
```python
INSTALLED_APPS = [
    # ...
    'debug_toolbar',
]

MIDDLEWARE = [
    # ...
    'debug_toolbar.middleware.DebugToolbarMiddleware',
]

INTERNAL_IPS = [
    '127.0.0.1',
]
# only for development in local machine
```
// add it to urls.py
```python
import debug_toolbar
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ...
    path('__debug__/', include(debug_toolbar.urls)),
]

- Creating models (attempt 1)
```bash
python ./manage.py startapp migrate
```
<!-- this command create db.sqlite3 -->










## 7. Static Files Setup
- Create a `static` folder in your main project directory (e.g., `lessondjango/static`).
- In `settings.py`, configure the static files directory:

```python
STATIC_URL = '/static/'
STATICFILES_DIRS = [str(BASE_DIR.joinpath('static'))]
```
- This setup is usually done once per project.
## 8. Running the Server
- To run the development server, use:

```bash
python manage.py runserver
``` -->

## 7. steps to deplot in pythonanywhere
- Create an account on [pythonanywhere.com](https://www.pythonanywhere.com/).
- Create a new web app and select Django as the framework.
- Upload your project files to the server using the file manager or via Git.
- Set up a virtual environment on PythonAnywhere and install Django and any other dependencies.
- Configure the WSGI file to point to your Django project.
- Set the static files directory in the PythonAnywhere web app settings.


**Additional Notes:**

- Always activate your virtual environment before running Django commands.
- Use `python manage.py makemigrations` and `python manage.py migrate` to manage your database schema.
- For static files (CSS, JS), configure `STATIC_URL` and `STATICFILES_DIRS` in `settings.py`.
- Refer to the [official Django documentation](https://docs.djangoproject.com/) for more details and best practices.


# working with models
- In your app's `models.py`, define your models:

```python
from django.db import models

class Article(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    published_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.title
```
- After defining models, create and apply migrations:

```bash
python manage.py migrate
python manage.py makemigrations

# its if you write what changes you made
python manage.py makemigrations news

```
- To interact with your models, use the Django shell:

```bash
python manage.py shell
```

- register models in admin.py
```python
from django.contrib import admin
from .models import Article

admin.site.register(Article)
```
- Create a superuser to access the admin interface:

```bash
python manage.py createsuperuser
```

```bash
python manage.py runserver
```
- Access the admin interface at `http://127.0.0.1:8000/admin/`  and log in with the superuser credentials. You can now add, edit, and delete articles through the admin interface.
- To display articles in a template, update your view:

```python
from django.shortcuts import render
from .models import Article

def article_list(request):
    articles = Article.objects.all()
    return render(request, 'article_list.html', {'articles': articles})
```

``` python  views.py class based view

from django.shortcuts import render
from .models import News
from django.views.generic import ListView
# Create your views here.
class NewsListView(ListView):
    model = News
    template_name = 'home.html'
```


- Create a template `article_list.html` in the `templates` folder:

```html
{% extends 'base.html' %}

{% block title %}Articles{% endblock %}

{% block content %}
    <h2>Articles</h2>
    <ul>
        {% for article in articles %}
            <li>
                <h3>{{ article.title }}</h3>
                <p>{{ article.content }}</p>
                <small>Published at: {{ article.published_at }}</small>
            </li>
        {% empty %}
            <li>No articles available.</li>
        {% endfor %}
    </ul>
{% endblock %}
```
- writing tests for models in tests.py
```python
from django.test import TestCase
from django.urls import reverse
from .models import Article

class ArticleModelTests(TestCase):

    def test_article_creation(self):
        article = Article.objects.create(
            title="Test Article",
            content="This is a test article."
        )
        self.assertEqual(article.title, "Test Article")
        self.assertEqual(article.content, "This is a test article.")

    def test_article_list_view(self):
        response = self.client.get(reverse('article_list'))
        self.assertEqual(response.status_code, 200)
        self.assertTemplateUsed(response, 'article_list.html')
        self.assertContains(response, "No articles available.")
